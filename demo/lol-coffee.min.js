(function(){window.LOLCoffee={KEYWORDS:["IF U SAY SO","IM OUTTA YR","QUOSHUNT OF","PRODUKT OF","BOTH SAEM","EITHER OF","HOW DUZ I","SMALLR OF","BIGGR OF","CHARZ OF","DIFFRINT","FOUND YR","IM IN YR","IS NOW A","LENGZ OF","BOTH OF","DIFF OF","I HAS A","KTHXBYE","ORDZ OF","VISIBLE","ALL OF","ANY OF","BUKKIT","GIMMEH","MOD OF","NERFIN","NUMBAR","NO WAI","O RLY?","OMGWTF","SMOOSH","SUM OF","WON OF","YA RLY","MEBBE","NUMBR","TROOF","UPPIN","FAIL","GTFO","INTA","MAEK","MKAY","NOOB","PUTZ","WILE","WTF?",
"YARN","HAI","ITZ","NOT","OIC","OMG","TIL","WIN","AN","AT","YR","!","A","R"],UNARY_OPERATORS:["NOT","LENGZ OF","CHARZ OF","ORDZ OF"],BINARY_OPERATORS:["SUM OF","DIFF OF","PRODUKT OF","QUOSHUNT OF","MOD OF","BIGGR OF","SMALLR OF","BOTH OF","EITHER OF","WON OF","BOTH SAEM","DIFFRINT"],INFINITARY_OPERATORS:["ALL OF","ANY OF","SMOOSH"],DEFAULT_VALUES:{YARN:"",NUMBR:0,NUMBAR:0,TROOF:!1,NOOB:null}}}).call(this);
(function(){var e,w,t,z,A,v,r,h,a,c,f,o,p,m,u,D,E,F,g,n,B,G,C,H,k,x,I,s,J,K,L,M,N,j,d,b,O,P,Q,q,R,T=Object.prototype.hasOwnProperty,y=function(b,i){function a(){this.constructor=b}for(var d in i)T.call(i,d)&&(b[d]=i[d]);a.prototype=i.prototype;b.prototype=new a;b.__super__=i.prototype;return b},S=function(b,i){return function(){return b.apply(i,arguments)}};k=function(){function b(i){this.message=i+"."}y(b,Error);b.prototype.name="MachineError";return b}();q=function(){function b(i,a){this.type=i;
this.value=a}b.prototype.equal=function(i){var b,a;return((b=this.type)==="float"||b==="int")&&((a=i.type)==="float"||a==="int")?this.value===i.value:this.type===i.type?this.value===i.value:!1};b.prototype.cast=function(i,a){var d;a==null&&(a=!1);if(i==="null")throw new k("Cannot cast to NOOB");d=null;switch(this.type){case "null":if(a){if(!(i in window.LOLCoffee.DEFAULT_VALUES))throw new k("Unknown type: "+i);d=window.LOLCoffee.DEFAULT_VALUES[i]}else{if(i!=="bool")throw new k("Cannot implicitly cast NOOB to "+
i);d=!1}break;case "bool":d=function(){switch(i){case "bool":return this.value;case "int":case "float":return Number(this.value);case "string":return this.value?"WIN":"FAIL";default:throw new k("Unknown type: "+i);}}.call(this);break;case "int":d=function(){switch(i){case "bool":return this.value!==0;case "int":case "float":return this.value;case "string":return String(this.value);default:throw new k("Unknown type: "+i);}}.call(this);break;case "float":d=function(){switch(i){case "bool":return this.value!==
0;case "int":return Math.floor(this.value);case "float":return this.value;case "string":return String(this.value);default:throw new k("Unknown type: "+i);}}.call(this);break;case "string":d=function(){switch(i){case "bool":return this.value!=="";case "int":if(!/^-?\d+$/.test(this.value))throw new k("Cannot parse NUMBR from '"+this.value+"'");return parseInt(this.value,10);case "float":if(!/^-?(\d+(\.\d*)?|\.\d+)$/.test(this.value))throw new k("Cannot parse NUMBAR from '"+this.value+"'");return parseFloat(this.value);
case "string":return this.value;default:throw new k("Unknown type: "+i);}}.call(this);break;default:throw new k("Unknown type: "+this.type);}return new b(i,d)};return b}();u=function(){return function(b,i){this.name=b;this.instruction_ptr=i;this.variables={};this.stack=[]}}();g=function(){function b(){}b.prototype.exec=function(i){i.halted=!0;return i.done()};return b}();G=function(){function b(i){this.label=i}b.prototype.exec=function(b){return b.instruction_ptr=b.labels[this.label]};return b}();
C=function(){function b(i){this.label=i}b.prototype.exec=function(b){if(b.getStack().pop().value===!1)return b.instruction_ptr=b.labels[this.label]};return b}();f=function(){function b(i,a){this.name=i;this.label=a}b.prototype.exec=function(b){return b.functions[this.name]=b.labels[this.label]};return b}();o=function(){function b(i){this.identifier=i}b.prototype.exec=function(b){if(this.identifier==="IT")throw new k("Cannot declare the special variable IT");return b.frames.slice(-1)[0].variables[this.identifier]=
new q("null",null)};return b}();A=function(){function b(i){this.identifier=i}b.prototype.exec=function(b){var a,d;a=b.frames[0].variables;d=b.frames.slice(-1)[0].variables;b=b.getStack().pop();if(this.identifier in d)return d[this.identifier]=b;else if(this.identifier in a)return a[this.identifier]=b;else throw new k("Assignment to undefined variable: "+this.identifier);};return b}();v=function(){function b(i){this.identifier=i}b.prototype.exec=function(b){var a,d,l;d=b.frames[0].variables;a=b.frames.slice(-1)[0].variables;
if(this.identifier in a)d=a;else if(!(this.identifier in d))throw new k("Assignment to undefined variable: "+this.identifier);a=d[this.identifier];l=b.getStack().pop();b=b.getStack().pop();if(a.type!=="string")throw new k("Can only index YARNs, not "+a.type);if(l.type!=="int")throw new k("Can only index using NUMBRs, not "+l.type);if(l.value>=a.value.length)throw new k("Out of bounds: '"+a.value+"'["+l.value+"]");if(b.type!=="string"||b.value.length!==1)throw new k("Can only assign single-character YARNs to YARN indices, not "+
b.value);a=a.value;b=a.slice(0,l.value)+b.value+a.slice(l.value+1);return d[this.identifier]=new q("string",b)};return b}();n=function(){function b(){}b.prototype.exec=function(b){b.pause();return b.input()};return b}();M=function(){function b(){}b.prototype.exec=function(b){b.pause();return b.output(b.getStack().pop().value)};return b}();j=function(){function b(){}b.prototype.exec=function(b){var a;a=(a=b.syscall_result)?String(a):"";return b.getStack().push(new q("string",a))};return b}();d=function(){function b(a){this.identifier=
a}b.prototype.exec=function(b){var a,d;a=b.frames[0].variables;d=b.frames.slice(-1)[0].variables;if(this.identifier in d)a=d[this.identifier];else if(this.identifier in a)a=a[this.identifier];else throw new k("Reference to undefined variable: "+this.identifier);return b.getStack().push(a)};return b}();E=function(){function b(){}b.prototype.exec=function(b){var a,d;a=b.getStack().pop();d=b.getStack().pop();if(a.type!=="string")throw new k("Can only index YARNs, not "+a.type);if(d.type!=="int")throw new k("Can only index using NUMBRs, not "+
d.type);if(d.value>=a.value.length)throw new k("Out of bounds: '"+a.value+"'["+d.value+"]");return b.getStack().push(new q("string",a.value[d.value]))};return b}();N=function(){function b(a,d){this.type=a;this.value=d}b.prototype.exec=function(b){return b.getStack().push(new q(this.type,this.value))};return b}();a=function(){function b(a,d){this.type=a;this.explicit=d!=null?d:!1}b.prototype.exec=function(b){return b.getStack().push(b.getStack().pop().cast(this.type,this.explicit))};return b}();h=
function(){function b(a,d){this.func_name=a;this.args_count=d}b.prototype.exec=function(b){var a,d,l;a=b.getStack();b.frames.push(new u(this.func_name,b.instruction_ptr));d=0;for(l=this.args_count;0<=l?d<l:d>l;0<=l?d++:d--)b.getStack().push(a.pop());return b.instruction_ptr=b.functions[this.func_name]};return b}();b=function(){function b(){}b.prototype.exec=function(b){var a,d;d=b.getStack().pop();a=b.frames.pop();b.instruction_ptr=a.instruction_ptr;return b.getStack().push(d)};return b}();w=function(){function b(a){this.args_count=
a}b.prototype.exec=function(b){var a,d,l,c,g,f;d=function(){var a,d;d=[];c=0;for(a=this.args_count;0<=a?c<a:c>a;0<=a?c++:c--)d.push(b.getStack().pop().cast("bool").value);return d}.call(this);l=!0;g=0;for(f=d.length;g<f;g++)if(a=d[g],!a){l=!1;break}return b.getStack().push(new q("bool",l))};return b}();z=function(){function b(a){this.args_count=a}b.prototype.exec=function(b){var a,d,l,c,g,f;d=function(){var a,d;d=[];c=0;for(a=this.args_count;0<=a?c<a:c>a;0<=a?c++:c--)d.push(b.getStack().pop().cast("bool").value);
return d}.call(this);l=!1;g=0;for(f=d.length;g<f;g++)if(a=d[g]){l=!0;break}return b.getStack().push(new q("bool",l))};return b}();c=function(){function b(a){this.args_count=a}b.prototype.exec=function(b){var a,d;a=function(){var a,c;c=[];d=0;for(a=this.args_count;0<=a?d<a:d>a;0<=a?d++:d--)c.push(b.getStack().pop().cast("string").value);return c}.call(this);return b.getStack().push(new q("string",a.join("")))};return b}();x=function(){function b(){}b.prototype.exec=function(b,a){var d,c,l;d=b.getStack().pop();
c=b.getStack().pop();l="float"===d.type||"float"===c.type?"float":"int";d=d.cast(l).value;c=c.cast(l).value;d=a(d,c);l==="int"&&(d=Math.floor(d));return b.getStack().push(new q(l,d))};return b}();e=function(){function b(){b.__super__.constructor.apply(this,arguments)}y(b,x);b.prototype.exec=function(a){return b.__super__.exec.call(this,a,function(b,a){return b+a})};return b}();O=function(){function b(){b.__super__.constructor.apply(this,arguments)}y(b,x);b.prototype.exec=function(a){return b.__super__.exec.call(this,
a,function(b,a){return b-a})};return b}();K=function(){function b(){b.__super__.constructor.apply(this,arguments)}y(b,x);b.prototype.exec=function(a){return b.__super__.exec.call(this,a,function(b,a){return b*a})};return b}();p=function(){function b(){b.__super__.constructor.apply(this,arguments)}y(b,x);b.prototype.exec=function(a){return b.__super__.exec.call(this,a,function(b,a){return b/a})};return b}();J=function(){function b(){b.__super__.constructor.apply(this,arguments)}y(b,x);b.prototype.exec=
function(a){return b.__super__.exec.call(this,a,function(b,a){return b%a})};return b}();I=function(){function b(){b.__super__.constructor.apply(this,arguments)}y(b,x);b.prototype.exec=function(a){return b.__super__.exec.call(this,a,function(b,a){return b>a?b:a})};return b}();s=function(){function b(){b.__super__.constructor.apply(this,arguments)}y(b,x);b.prototype.exec=function(a){return b.__super__.exec.call(this,a,function(b,a){return b<a?b:a})};return b}();r=function(){function b(){}b.prototype.exec=
function(b,a){var d,c;d=b.getStack().pop().cast("bool").value;c=b.getStack().pop().cast("bool").value;return b.getStack().push(new q("bool",a(d,c)))};return b}();t=function(){function b(){b.__super__.constructor.apply(this,arguments)}y(b,r);b.prototype.exec=function(a){return b.__super__.exec.call(this,a,function(b,a){return b&&a})};return b}();L=function(){function b(){b.__super__.constructor.apply(this,arguments)}y(b,r);b.prototype.exec=function(a){return b.__super__.exec.call(this,a,function(b,
a){return b||a})};return b}();R=function(){function b(){b.__super__.constructor.apply(this,arguments)}y(b,r);b.prototype.exec=function(a){return b.__super__.exec.call(this,a,function(b,a){return b^a})};return b}();m=function(){function b(){}b.prototype.exec=function(b){var a,d;a=b.getStack().pop();d=b.getStack().pop();return b.getStack().push(new q("bool",a.equal(d)))};return b}();Q=function(){function b(){}b.prototype.exec=function(b){var a,d;a=b.getStack().pop();d=b.getStack().pop();return b.getStack().push(new q("bool",
!a.equal(d)))};return b}();B=function(){function b(){}b.prototype.exec=function(b){var a;a=b.getStack().pop().cast("bool").value;return b.getStack().push(new q("bool",!a))};return b}();F=function(){function b(){}b.prototype.exec=function(b){var a;a=b.getStack().pop();if(a.type!=="string")throw new k("Can only get length of YARNs");return b.getStack().push(new q("int",a.value.length))};return b}();D=function(){function b(){}b.prototype.exec=function(b){var a;a=b.getStack().pop();if(a.type!=="int")throw new k("Character codes must be NUMBRs, not "+
a.type);a=String.fromCharCode(a.value);return b.getStack().push(new q("string",a))};return b}();P=function(){function b(){}b.prototype.exec=function(b){var a;a=b.getStack().pop();if(a.type!=="string"||!a.value.length)throw new k("Can only take character code of non-empty "+("YARNs, not '"+a.type+"'"));return b.getStack().push(new q("int",a.value.charCodeAt(0)))};return b}();H=function(){function b(a,d,c,g,f){this.context=a;this.input=d;this.output=c;this.error=g!=null?g:function(){};this.done=f!=
null?f:function(){};this.instructions=this.context.instructions;this.labels=this.context.labels;this.reset();this.input=this.input||S(function(){return this.resume()},this);this.output=this.output||S(function(){return this.resume()},this)}b.prototype.reset=function(){this.instruction_ptr=0;this.frames=[new u("{MAIN}",0)];this.frames[0].variables.IT=new q("null",null);this.functions={};this.halted=!0;this.blocked=!1;return this.syscall_result=null};b.prototype.step=function(){if(this.blocked||this.halted||
this.instruction_ptr>=this.instructions.length)throw new k("Cannot execute while blocked, halted or at end");try{return this.instructions[this.instruction_ptr++].exec(this)}catch(b){return this.error(b),this.halted=!0}};b.prototype.run=function(){var b;this.halted=!1;for(b=[];!this.blocked&&!this.halted;)b.push(this.step());return b};b.prototype.pause=function(){return this.blocked=!0};b.prototype.resume=function(b){b==null&&(b=null);this.syscall_result=b;this.blocked=!1;if(!this.halted)return this.run()};
b.prototype.getStack=function(){return this.frames[this.frames.length-1].stack};return b}();window.LOLCoffee.Machine=H;window.LOLCoffee.MachineError=k;window.LOLCoffee.Instructions={Halt:g,PushLiteral:N,DeclareFunction:f,Jump:G,DeclareVariable:o,Assign:A,AssignAtIndex:v,Return:b,Input:n,PushSyscallResult:j,Output:M,PushVariable:d,GetIndex:E,Cast:a,JumpIfZero:C,Call:h,All:w,Any:z,Concat:c,Add:e,Subtract:O,Multiply:K,Divide:p,Modulo:J,Max:I,Min:s,And:t,Or:L,Xor:R,Equal:m,Unequal:Q,Invert:B,GetLength:F,
FromCharCode:D,ToCharCode:P}}).call(this);
(function(){var e,w,t,z,A,v,r,h,a,c,f,o,p,m,u,D,E,F,g,n,B,G,C,H,k,x,I,s,J,K,L,M,N=Object.prototype.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var g in b)N.call(b,g)&&(a[g]=b[g]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};g=window.LOLCoffee.Instructions;h=function(){function a(b){this.message=b}j(a,Error);a.prototype.name="CodeGenError";return a}();r=function(){function a(){this.instructions=[];this.labels=[];this._break_stack=[]}a.prototype.emit=
function(b){return this.instructions.push(b)};a.prototype.newLabel=function(){this.labels.push(null);return this.labels.length-1};a.prototype.emitLabel=function(b){if(b>=this.labels.length)throw new h("Unknown label ("+b+"). Top: "+this.labels.length);return this.labels[b]=this.instructions.length};a.prototype.getBreakLabel=function(){return this._break_stack[this._break_stack.length-1]};a.prototype.popBreakLabel=function(){return this._break_stack.pop()};a.prototype.pushBreakLabel=function(b){return this._break_stack.push(b)};
return a}();C=function(){return function(){}}();x=function(){function a(b){this.body=b}j(a,C);a.prototype.codegen=function(b){this.body.codegen(b);return b.emit(new g.Halt)};return a}();p=function(){function a(b,d,c){this.name=b;this.args=d;this.body=c}j(a,C);a.prototype.codegen=function(b){var a,d,c,f,e;a=b.newLabel();d=b.newLabel();b.emit(new g.DeclareFunction(this.name,a));b.emit(new g.Jump(d));b.emitLabel(a);this.args.reverse();e=this.args;c=0;for(f=e.length;c<f;c++)a=e[c],b.emit(new g.DeclareVariable(a)),
b.emit(new g.Assign(a));this.body.codegen(b);return b.emitLabel(d)};return a}();s=function(){function a(){a.__super__.constructor.apply(this,arguments)}j(a,C);return a}();I=function(){function a(b){this.value=b}j(a,s);a.prototype.codegen=function(b){this.value.codegen(b);return b.emit(new g.Return)};return a}();F=function(){function a(b){this.identifier=b}j(a,s);a.prototype.codegen=function(b){b.emit(new g.Input);b.emit(new g.PushSyscallResult);return b.emit(new g.Assign(this.identifier))};return a}();
k=function(){function a(b){this.expression=b}j(a,s);a.prototype.codegen=function(b){this.expression.codegen(b);return b.emit(new g.Output)};return a}();c=function(){function a(b){this.identifier=b}j(a,s);a.prototype.codegen=function(b){return b.emit(new g.DeclareVariable(this.identifier))};return a}();e=function(){function a(b,d){this.identifier=b;this.value=d}j(a,s);a.prototype.codegen=function(b){this.value.codegen(b);return b.emit(new g.Assign(this.identifier))};return a}();u=function(){function a(b,
d,c){this.identifier=b;this.index=d;this.value=c}j(a,s);a.prototype.codegen=function(b){this.value.codegen(b);this.index.codegen(b);return b.emit(new g.AssignAtIndex(this.identifier))};return a}();z=function(){function a(){}j(a,s);a.prototype.codegen=function(b){return b.emit(new g.Jump(b.getBreakLabel()))};return a}();J=function(){function a(b){this.statements=b}j(a,s);a.prototype.codegen=function(b){var a,d,c,g,f;g=this.statements;f=[];d=0;for(c=g.length;d<c;d++)a=g[d],f.push(a.codegen(b));return f};
return a}();a=function(){function a(b,d){this.then_body=b;this.else_body=d}j(a,s);a.prototype.codegen=function(b){var a,d;a=b.newLabel();d=b.newLabel();b.emit(new g.PushVariable("IT"));b.emit(new g.Cast("bool"));b.emit(new g.JumpIfZero(a));this.then_body.codegen(b);b.emit(new g.Jump(d));b.emitLabel(a);this.else_body&&this.else_body.codegen(b);return b.emitLabel(d)};return a}();L=function(){function a(b,d){this.cases=b;this.default_case=d}j(a,s);a.prototype.codegen=function(b){var a,d,c,f,e,h,o;e=
this.cases;f=0;for(a=e.length;f<a;f++)d=e[f],d.push(b.newLabel());this.default_case&&(c=b.newLabel());d=b.newLabel();o=this.cases;e=0;for(h=o.length;e<h;e++)f=o[e],a=f[0],f=f[2],a.codegen(b),b.emit(new g.PushVariable("IT")),b.emit(new g.Unequal),b.emit(new g.JumpIfZero(f));this.default_case&&b.emit(new g.Jump(c));b.pushBreakLabel(d);o=this.cases;e=0;for(h=o.length;e<h;e++)f=o[e],a=f[1],f=f[2],b.emitLabel(f),a.codegen(b);this.default_case&&(b.emitLabel(c),this.default_case.codegen(b));b.popBreakLabel();
return b.emitLabel(d)};return a}();G=function(){function a(b,d,c){this.step=b;this.condition=d;this.body=c}j(a,s);a.prototype.codegen=function(b){var a,d;d=b.newLabel();a=b.newLabel();b.emitLabel(d);this.condition&&(this.condition.codegen(b),b.emit(new g.Cast("bool")),b.emit(new g.JumpIfZero(a)));this.body.codegen(b);this.step&&this.step.codegen(b);b.emit(new g.Jump(d));return b.emitLabel(a)};return a}();f=function(){function a(){a.__super__.constructor.apply(this,arguments)}j(a,C);return a}();A=
function(){function a(b,d){this.func_name=b;this.args=d}j(a,f);a.prototype.codegen=function(b){var a,d,c,f;f=this.args;d=0;for(c=f.length;d<c;d++)a=f[d],a.codegen(b);return b.emit(new g.Call(this.func_name,this.args.length))};return a}();m=function(){function a(b){this.identifier=b}j(a,f);a.prototype.codegen=function(b){return b.emit(new g.PushVariable(this.identifier))};return a}();D=function(){function a(b,d){this.base=b;this.index=d}j(a,f);a.prototype.codegen=function(b){this.index.codegen(b);
this.base.codegen(b);return b.emit(new g.GetIndex)};return a}();v=function(){function a(b,d){this.expression=b;this.type=d}j(a,f);a.prototype.codegen=function(b){var a;this.expression.codegen(b);a=function(){switch(this.type){case "NOOB":return"null";case "TROOF":return"bool";case "NUMBR":return"int";case "NUMBAR":return"float";case "YARN":return"string"}}.call(this);return b.emit(new g.Cast(a,!0))};return a}();E=function(){function a(b,d){this.operator=b;this.operands=d}j(a,f);a.prototype.codegen=
function(b){var a,d,c,f;this.operands.reverse();f=this.operands;d=0;for(c=f.length;d<c;d++)a=f[d],a.codegen(b);a=function(){switch(this.operator){case "ALL OF":return new g.All(this.operands.length);case "ANY OF":return new g.Any(this.operands.length);case "SMOOSH":return new g.Concat(this.operands.length);default:throw new h("Unknown infinitary operator.");}}.call(this);return b.emit(a)};return a}();w=function(){function a(b,d,c){this.operator=b;this.left=d;this.right=c}j(a,f);a.prototype.codegen=
function(b){var a;this.right.codegen(b);this.left.codegen(b);a=function(){switch(this.operator){case "SUM OF":return new g.Add;case "DIFF OF":return new g.Subtract;case "PRODUKT OF":return new g.Multiply;case "QUOSHUNT OF":return new g.Divide;case "MOD OF":return new g.Modulo;case "BIGGR OF":return new g.Max;case "SMALLR OF":return new g.Min;case "BOTH OF":return new g.And;case "EITHER OF":return new g.Or;case "WON OF":return new g.Xor;case "BOTH SAEM":return new g.Equal;case "DIFFRINT":return new g.Unequal;
default:throw new h("Unknown binary operator.");}}.call(this);return b.emit(a)};return a}();M=function(){function a(b,d){this.operator=b;this.operand=d}j(a,f);a.prototype.codegen=function(b){var a;this.operand.codegen(b);a=function(){switch(this.operator){case "NOT":return new g.Invert;case "LENGZ OF":return new g.GetLength;case "CHARZ OF":return new g.FromCharCode;case "ORDZ OF":return new g.ToCharCode;default:throw new h("Unknown unary operator.");}}.call(this);return b.emit(a)};return a}();B=function(){function a(){a.__super__.constructor.apply(this,
arguments)}j(a,f);return a}();H=function(){function a(){a.__super__.constructor.apply(this,arguments)}j(a,B);a.prototype.codegen=function(a){return a.emit(new g.PushLiteral("null",null))};return a}();t=function(){function a(b){this.value=b}j(a,B);a.prototype.codegen=function(a){return a.emit(new g.PushLiteral("bool",this.value))};return a}();n=function(){function a(b){this.value=b}j(a,B);a.prototype.codegen=function(a){return a.emit(new g.PushLiteral("int",this.value))};return a}();o=function(){function a(b){this.value=
b}j(a,B);a.prototype.codegen=function(a){return a.emit(new g.PushLiteral("float",this.value))};return a}();K=function(){function a(b){this.value=b}j(a,B);a.prototype.codegen=function(a){return a.emit(new g.PushLiteral("string",this.value))};return a}();window.LOLCoffee.CodeGenError=h;window.LOLCoffee.CodeGenContext=r;window.LOLCoffee.AST={Node:C,Program:x,Statement:s,FunctionDefinition:p,Declaration:c,Return:I,Input:F,Output:k,Assignment:e,IndexedAssignment:u,Break:z,Loop:G,Conditional:a,Switch:L,
StatementList:J,Expression:f,IdentifierExpression:m,IndexingExpression:D,CastExpression:v,CallExpression:A,UnaryExpression:M,BinaryExpression:w,InfinitaryExpression:E,Literal:B,NullLiteral:H,BoolLiteral:t,IntLiteral:n,FloatLiteral:o,StringLiteral:K}}).call(this);
(function(){var e,w,t,z=Object.prototype.hasOwnProperty,A=function(e,a){function c(){this.constructor=e}for(var f in a)z.call(a,f)&&(e[f]=a[f]);c.prototype=a.prototype;e.prototype=new c;e.__super__=a.prototype;return e},v=function(e,a){return function(){return e.apply(a,arguments)}},r=Array.prototype.indexOf||function(e){for(var a=0,c=this.length;a<c;a++)if(this[a]===e)return a;return-1};e=window.LOLCoffee.AST;t=function(){function e(a,c){this.message="Line "+a+": "+c+"."}A(e,Error);e.prototype.name=
"ParserError";return e}();w=function(){function h(a,c){this.tokens=a;this.function_arities=c!=null?c:{};this._scope_depth=0;this._in_function=!1}h.prototype.parseProgram=function(){var a,c;if(!this.tokens.length)return new e.Program(new e.StatementList([]));if(a=this._nextIs("keyword","HAI"))this._consume(),this._nextIs("endline")||this._consume("float","1.2"),this._consume();c=function(){var a;for(a=[];this.tokens.length&&!this._nextIs("keyword","KTHXBYE");)a.push(this.parseStatement());return a}.call(this);
this._nextIs("keyword","KTHXBYE")&&(a||this._error("KTHXBYE is not allowed when HAI is not used"),this._consume("keyword","KTHXBYE"),this._consume("endline"));this.tokens.length!==0&&this._error("Unexpected input after program end");return new e.Program(new e.StatementList(c))};h.prototype.parseFunctionDefinition=function(){var a,c,f;this._consume("keyword","HOW DUZ I");f=this._consume("identifier");a=this.parseFunctionArgs();this._consume("endline");this.function_arities[f]=a.length;this._in_function=
!0;c=function(){var a;for(a=[];!this._nextIs("keyword","IF U SAY SO");)a.push(this.parseStatement());return a}.call(this);c.push(new e.Return(new e.IdentifierExpression("IT")));c=new e.StatementList(c);this._in_function=!1;this._consume("keyword","IF U SAY SO");return new e.FunctionDefinition(f,a,c)};h.prototype.parseFunctionArgs=function(){var a;for(a=[];this._nextIs("keyword","YR");)if(this._consume(),a.push(this._consume("identifier")),this._nextIs("keyword","AN"))this._consume();else break;return a};
h.prototype.parseStatement=function(){var a;this._nextIs("keyword","IM IN YR")?a=this.parseLoopStatement():this._nextIs("keyword","O RLY?")?a=this.parseConditionalStatement():this._nextIs("keyword","WTF?")?a=this.parseSwitchStatement():this._nextIs("keyword","I HAS A")?a=this.parseDeclaration():this._nextIs("keyword","GIMMEH")?a=this.parseInputStatement():this._nextIs("keyword","VISIBLE")?a=this.parseOutputStatement():this._nextIs("keyword","PUTZ")?a=this.parseIndexedAssignment():this._nextIs("keyword",
"HOW DUZ I")?(this._in_function&&this._error("Cannot define nested functions"),a=this.parseFunctionDefinition()):this._nextIs("keyword","GTFO")?(this._scope_depth>0?a=new e.Break:this._in_function?a=new e.Return(new e.NullLiteral):this._error("GTFO must be inside a loop, switch, or function"),this._consume()):this._nextIs("keyword","FOUND YR")?(this._consume(),this._in_function||this._error("FOUND YR must be inside a function"),a=new e.Return(this.parseExpression())):a=this.tokens.length>=2&&this._nextIs("identifier")&&
this.tokens[1].is("keyword","R")?this.parseAssignment():this.tokens.length>=2&&this._nextIs("identifier")&&this.tokens[1].is("keyword","IS NOW A")?this.parseCastStatement():new e.Assignment("IT",this.parseExpression());this._consume("endline");return a};h.prototype.parseInputStatement=function(){this._consume("keyword","GIMMEH");return new e.Input(this._consume("identifier"))};h.prototype.parseDeclaration=function(){var a,c,f;this._consume("keyword","I HAS A");f=this._consume("identifier");c=new e.Declaration(f);
return this._nextIs("keyword","ITZ")?(this._consume(),this._nextIs("keyword","A")?(this._consume(),a=window.LOLCoffee.DEFAULT_VALUES[this.parseType()],a=new e.Assignment(f,a)):a=new e.Assignment(f,this.parseExpression()),new e.StatementList([c,a])):c};h.prototype.parseAssignment=function(){var a;a=this._consume("identifier");this._consume("keyword","R");return new e.Assignment(a,this.parseExpression())};h.prototype.parseIndexedAssignment=function(){var a,c,f;this._consume("keyword","PUTZ");f=this.parseExpression();
this._consume("keyword","INTA");a=this._consume("identifier");this._consume("keyword","AT");c=this.parseExpression();return new e.IndexedAssignment(a,c,f)};h.prototype.parseLoopStatement=function(){var a,c,f,o,h,m,u;this._consume("keyword","IM IN YR");f=this._consume("identifier");h=m=null;this._nextIs("endline")||(!this._nextIs("keyword","UPPIN")&&!this._nextIs("keyword","NERFIN")&&!this._nextIs("identifier")&&this._error("A loop operation must follow the loop label"),h=this._consume(),this._consume("keyword",
"YR"),m=this._consume("identifier"),u=new e.IdentifierExpression(m),a=function(){switch(h){case "UPPIN":return new e.BinaryExpression("SUM OF",u,new e.IntLiteral(1));case "NERFIN":return new e.BinaryExpression("DIFF OF",u,new e.IntLiteral(1));default:return this.function_arities[h]!==1&&this._error("Loop operation must be UPPIN, NERFIN or a unary function"),new e.CallExpression(h,[u])}}.call(this),h=new e.Assignment(m,a),this._nextIs("endline")||(this._nextIs("keyword","WILE")?c=!1:this._nextIs("keyword",
"TIL")?c=!0:this._error("A loop variable must be followed by WILE or TIL"),this._consume(),o=this.parseExpression(),c&&(o=new e.UnaryExpression("NOT",o))));this._consume("endline");this._scope_depth++;a=function(){var a;for(a=[];!this._nextIs("keyword","IM OUTTA YR");)a.push(this.parseStatement());return a}.call(this);a=new e.StatementList(a);this._scope_depth--;this._consume("keyword","IM OUTTA YR");f!==this._consume("identifier")&&this._error("Mismatched loop label");return new e.Loop(h,o,a)};h.prototype.parseConditionalStatement=
function(){var a,c,f,h,p,m;this._consume("keyword","O RLY?");this._consume("endline");this._consume("keyword","YA RLY");this._consume("endline");p=v(function(){return this._nextIs("keyword","MEBBE")||this._nextIs("keyword","NO WAI")||this._nextIs("keyword","OIC")},this);h=function(){var a;for(a=[];!p();)a.push(this.parseStatement());return a}.call(this);m=new e.StatementList(h);for(h=[];this._nextIs("keyword","MEBBE");)this._consume(),c=this.parseExpression(),this._consume("endline"),a=function(){var a;
for(a=[];!p();)a.push(this.parseStatement());return a}.call(this),h.push([c,new e.StatementList(a)]);c=[];a=null;this._nextIs("keyword","OIC")||(this._consume("keyword","NO WAI"),this._consume("endline"),(c=function(){var a;for(a=[];!this._nextIs("keyword","OIC");)a.push(this.parseStatement());return a}.call(this))&&(a=new e.StatementList(c)));for(this._consume("keyword","OIC");h.length;)f=h.pop(),c=f[0],f=f[1],c=new e.Assignment("IT",c),a=new e.Conditional(f,a),a=new e.StatementList([c,a]);return new e.Conditional(m,
a)};h.prototype.parseSwitchStatement=function(){var a,c,f,h;this._consume("keyword","WTF?");this._consume("endline");c=[];f=null;for(this._scope_depth++;!this._nextIs("keyword","OIC");)this._nextIs("keyword","OMG")?(this._consume(),a=this.tokens[0].line,h=this.parseLiteral(),h instanceof e.Literal||this._error("OMG value must be a literal",a),this._consume("endline"),a=function(){var a;for(a=[];!this._nextIs("keyword","OMG")&&!this._nextIs("keyword","OMGWTF")&&!this._nextIs("keyword","OIC");)a.push(this.parseStatement());
return a}.call(this),c.push([h,new e.StatementList(a)])):this._nextIs("keyword","OMGWTF")?(this._consume(),this._consume("endline"),a=function(){var a;for(a=[];!this._nextIs("keyword","OIC");)a.push(this.parseStatement());return a}.call(this),f=new e.StatementList(a)):this._error("Expected OMG, OMGWTF or OIC");this._consume();this._scope_depth--;return new e.Switch(c,f)};h.prototype.parseExpression=function(){var a;return this._nextIs("keyword")?(a=this.tokens[0].text,a==="MAEK"?this.parseCastExpression():
r.call(window.LOLCoffee.UNARY_OPERATORS,a)>=0?this.parseUnaryExpression():r.call(window.LOLCoffee.BINARY_OPERATORS,a)>=0?this.parseBinaryExpression():r.call(window.LOLCoffee.INFINITARY_OPERATORS,a)>=0?this.parseInfinitaryExpression():a==="WIN"||a==="FAIL"||a==="NOOB"?this.parseLiteral():this._error("Invalid keyword at start of expression")):this._nextIs("identifier")?(a=this.tokens[0].text in this.function_arities?this.parseFunctionCall():new e.IdentifierExpression(this._consume()),this._nextIs("keyword",
"AT")?(this._consume(),new e.IndexingExpression(a,this.parseExpression())):a):this.parseLiteral()};h.prototype.parseCastExpression=function(){var a;this._consume("keyword","MAEK");a=this.parseExpression();this._nextIs("keyword","A")&&this._consume();return new e.CastExpression(a,this.parseType())};h.prototype.parseCastStatement=function(){var a,c;c=this._consume("identifier");a=new e.IdentifierExpression(c);this._consume("keyword","IS NOW A");a=new e.CastExpression(a,this.parseType());return new e.Assignment(c,
a)};h.prototype.parseType=function(){var a;a=this._consume("keyword");a in window.LOLCoffee.DEFAULT_VALUES||this._error("Unknown type");return a};h.prototype.parseLiteral=function(){var a;return this._nextIs("string")?this._createStringLiteral(this._consume()):this._nextIs("int")?new e.IntLiteral(parseInt(this._consume(),10)):this._nextIs("float")?new e.FloatLiteral(parseFloat(this._consume())):this._nextIs("keyword")?(a=this._consume(),a==="WIN"||a==="FAIL"?new e.BoolLiteral(a==="WIN"):a==="NOOB"?
new e.NullLiteral:this._error("Unexpected keyword while parsing literal",a.line)):this._error("Could not parse literal")};h.prototype.parseFunctionCall=function(){var a,c,f;c=this._consume("identifier");c in this.function_arities||this._error("Undefined function: "+c);a=function(){var a,e;e=[];f=0;for(a=this.function_arities[c];0<=a?f<a:f>a;0<=a?f++:f--)e.push(this.parseExpression());return e}.call(this);return new e.CallExpression(c,a)};h.prototype.parseOutputStatement=function(){var a;this._consume("keyword",
"VISIBLE");a=function(){var a;for(a=[];!this._nextIs("keyword","!")&&!this._nextIs("endline");)a.push(this.parseExpression());return a}.call(this);this._nextIs("keyword","!")?this._consume():a.push(new e.StringLiteral("\n"));return new e.Output(new e.InfinitaryExpression("SMOOSH",a))};h.prototype.parseUnaryExpression=function(){var a;a=this._consume("keyword");r.call(window.LOLCoffee.UNARY_OPERATORS,a)<0&&this._error("Unknown unary operator: "+a);return new e.UnaryExpression(a,this.parseExpression())};
h.prototype.parseBinaryExpression=function(){var a,c,f;c=this._consume("keyword");r.call(window.LOLCoffee.BINARY_OPERATORS,c)<0&&this._error("Unknown binary operator: "+c);a=this.parseExpression();this._nextIs("keyword","AN")&&this._consume();f=this.parseExpression();return new e.BinaryExpression(c,a,f)};h.prototype.parseInfinitaryExpression=function(){var a,c;c=this._consume("keyword");r.call(window.LOLCoffee.INFINITARY_OPERATORS,c)<0&&this._error("Unknown infinitary operator: "+c);a=function(){var a;
for(a=[];!this._nextIs("keyword","MKAY")&&!this._nextIs("endline");)this._nextIs("keyword","AN")&&this._consume(),a.push(this.parseExpression());return a}.call(this);this._nextIs("keyword","MKAY")&&this._consume();return new e.InfinitaryExpression(c,a)};h.prototype._createStringLiteral=function(a){var c,f,h,p,m;/^".*"$/.test(a)||this._error("Invalid string literal: "+a);a=a.slice(1,-1);p=[];c=[];h=0;for(m=a.length;h<m;h++)if(f=a[h],f===":")switch(f=a[++h],f){case ")":c.push("\n");break;case ">":c.push("\t");
break;case "o":c.push("g");break;case '"':c.push('"');break;case ":":c.push(":");break;case "(":f=a.slice(h).match(/\(([\da-fA-F]+)\)/);h+=f[0].length-1;c.push(String.fromCharCode(parseInt(f[1],16)));break;case "{":f=a.slice(h).match(/\{([a-zA-Z]\w*)\}/);h+=f[0].length-1;c.length&&p.push(new e.StringLiteral(c.join("")));p.push(new e.IdentifierExpression(f[1]));c=[];break;case "[":this._error("Unicode name embedding not implemented yet: "+a)}else c.push(f);return p.length?(c.length&&p.push(new e.StringLiteral(c.join(""))),
new e.InfinitaryExpression("SMOOSH",p)):new e.StringLiteral(c.join(""))};h.prototype._consume=function(a,c){var f,e;if(!(a!=null||c!=null))return this.tokens.shift().text;if(this._nextIs(a,c))return this._consume();else throw this.tokens.length===0?(e="(last)",f="(end of input)"):(e=this.tokens[0].line,f=""+this.tokens[0].type+"("+this.tokens[0].text+")"),new t(e,"Expected: "+(c!=null?""+a+"('"+(c||"")+"')":a)+"; Got: "+f);};h.prototype._nextIs=function(a,c){return this.tokens.length&&this.tokens[0].is(a,
c)};h.prototype._error=function(a,c){c?a+=", near "+this.tokens[0].type+":'"+this.tokens[0].text+"'":c=this.tokens.length?this.tokens[0].line:c="(last)";throw new t(c,a);};return h}();window.LOLCoffee.Parser=w;window.LOLCoffee.ParserError=t}).call(this);
(function(){var e,w,t,z,A,v,r,h,a,c,f,o,p,m,u=Object.prototype.hasOwnProperty,D=function(a,c){function e(){this.constructor=a}for(var f in c)u.call(c,f)&&(a[f]=c[f]);e.prototype=c.prototype;a.prototype=new e;a.__super__=c.prototype;return a},E=Array.prototype.indexOf||function(a){for(var c=0,e=this.length;c<e;c++)if(this[c]===a)return c;return-1};A=/^-?\d+/;w=/^-?(\d+\.\d*|\.\d+)/;t=/^[a-zA-Z]\w*/;a=/^OBTW\b[^]*?\bTLDR\b/;e=/^BTW\b.*/;h=/^(\u2026|\.\.\.)[ \t\v]*(\r\n|\r|\n)/;c=/^(\r\n|\r|\n|,)/;z=
/^[ \t\v]+/;f=/^"(?::(?:[)>o":]|\([\dA-Fa-f]+\)|\{[A-Za-z]\w*\}|\[[^\[\]]+\])|[^":])*"/;v=function(){var a,c,e,f;e=window.LOLCoffee.KEYWORDS;f=[];a=0;for(c=e.length;a<c;a++)m=e[a],f.push(m.replace(/\?/g,"\\?").replace(/\s/g,"[ \\t\\v]+"));return f}();r=RegExp("^("+v.join("|")+")(?=$|\\b|\\W)");p=function(){function a(c,e){this.message="Line "+c+": "+e+"."}D(a,Error);a.prototype.name="TokenizerError";return a}();o=function(){function a(c,e,f){this.line=c;this.type=e;this.text=f!=null?f:"";if(E.call(a.prototype.TYPES,
e)<0)throw new p(c,"Invalid token type: "+e);}a.prototype.is=function(a,c){return this.type===a&&(c===void 0||this.text===c)};a.prototype.TYPES=["endline","keyword","identifier","int","float","string"];return a}();v=function(){function m(a){this.text=a;this.tokens=[];this.line=[];this.line_index=1}m.prototype.tokenize=function(){for(var g,n;this.text;){if(!(n=this.text.match(z)))if(n=this.text.match(h))c.test(this.text.slice(n[0].length))&&this._error("Cannot have an empty line after line continuation");
else if(n=this.text.match(c))this._flushLine();else if(!(n=this.text.match(e)))(n=this.text.match(a))?this.line.length&&this._error("Multiline comments must start on a new line"):(n=this.text.match(r))?this._emit("keyword",n[0].replace(/\s+/g," ")):(n=this.text.match(t))?this._emit("identifier",n[0]):(n=this.text.match(w))?this._emit("float",n[0]):(n=this.text.match(A))?this._emit("int",n[0]):(n=this.text.match(f))?this._emit("string",n[0]):(g=this.text.match(/^.*/)[0],this._error("Unrecognized sequence at: "+
g));(g=n[0].match(/\r\n|\r|\n/g))&&(this.line_index+=g.length);this.text=this.text.slice(n[0].length)}this._flushLine();return this.tokens};m.prototype._flushLine=function(){if(this.line.length)this.tokens=this.tokens.concat(this.line),this.tokens.push(new o(this.line_index,"endline"));return this.line=[]};m.prototype._emit=function(a,c){return this.line.push(new o(this.line_index,a,c))};m.prototype._error=function(a){throw new p(this.line_index,a);};return m}();window.LOLCoffee.Tokenizer=v;window.LOLCoffee.TokenizerError=
p}).call(this);
